# Assessor de Investimentos Virtual
<img width="1887" height="943" alt="image" src="https://github.com/user-attachments/assets/958f11fe-bf72-42ef-b471-0525b9e5cdc2" />


## Integrantes
- Nome: Pedro Augusto Carneiro Barone Bomfim - RM: 99781
- Nome: Jo√£o Pedro de Albuquerque Oliveira - RM: 551579
- Nome: Matheus Augusto Santos Rego - RM:551466
- Nome: Ian Cancian Nachtergaele - RM: 98387

## Como usar?
A aplica√ß√£o tem um deploy no render, para uso sem necessidade de configura√ß√£o local: https://assessor-virtual-api.onrender.com. 

Mas, mais abaixo, h√° tamb√©m uma explica√ß√£o de como configurar o ambiente para execu√ß√£o em servidor de desenvolvimento.

A documenta√ß√£o dos endpoints pode ser encontrada aqui: https://assessor-virtual-api.onrender.com/api-docs

P.S. Para menor lat√™ncia, use o deploy do Google Cloud: https://assessor-virtual-api-684499909473.southamerica-east1.run.app. 

Se preferir usar docker para rodar localmente, a imagem do container √© essa 
```bash
docker pull docker.io/pbrnx/assessor-virtual-api:latest
```
## ‚ùØ Descri√ß√£o

O **Assessor de Investimentos Virtual** √© uma aplica√ß√£o Full Stack que simula uma plataforma de investimentos completa. O projeto consiste em uma API RESTful constru√≠da com Node.js e Express, conectada a um banco de dados Oracle, e um frontend din√¢mico (SPA - Single Page Application) desenvolvido com Vanilla JavaScript, HTML e CSS.

### Arquitetura e Padr√µes de Projeto

O projeto segue uma arquitetura em camadas, implementando os princ√≠pios SOLID:

-   **Single Responsibility**: Cada classe tem uma √∫nica responsabilidade (ex: `AuthService`, `CarteiraService`).
-   **Open/Closed**: Uso de estrat√©gias para diferentes perfis de investidor.
-   **Liskov Substitution**: (Verific√°vel pela conformidade das Strategies, embora n√£o formalmente via interfaces JS).
-   **Interface Segregation**: (Aplic√°vel conceitualmente na defini√ß√£o das responsabilidades dos servi√ßos).
-   **Dependency Inversion**: Inje√ß√£o de depend√™ncias nos servi√ßos (ex: Reposit√≥rio injetado no Servi√ßo).

### Design Patterns e Arquitetura

1.  **Repository Pattern**: Abstra√ß√£o do acesso aos dados atrav√©s dos repositories.
    * Exemplo: `cliente.repository.js`, `carteira.repository.js`.
2.  **DTO Pattern**: Transfer√™ncia e valida√ß√£o de dados entre camadas.
    * Exemplo: `auth.dto.js`, `carteira.dto.js`.
3.  **Middleware Pattern**: Intercepta√ß√£o e processamento de requisi√ß√µes.
    * Rate limiting em rotas de autentica√ß√£o.
    * Valida√ß√£o de JWT e roles.
4.  **Pool de Conex√µes (Impl√≠cito no `database.js`)**: Gerenciamento eficiente de conex√µes com o banco. (Nota: Singleton n√£o √© exatamente o termo, mas Pool Pattern sim).
5.  **Service Layer**: Encapsulamento da l√≥gica de neg√≥cios.
    * Servi√ßos especializados para cada dom√≠nio.
    * Separa√ß√£o clara de responsabilidades.

A plataforma permite que usu√°rios se cadastrem, verifiquem suas contas por e-mail, redefinam senhas, definam seu perfil de investidor atrav√©s de um question√°rio (suitability), gerenciem um saldo em conta, explorem um marketplace de ativos e montem sua pr√≥pria carteira de investimentos com funcionalidades de compra e venda.

---

## ‚ú® Funcionalidades

-   **üë§ Gest√£o de Clientes e Seguran√ßa**:
    -   Cadastro e login de usu√°rios com senhas criptografadas.
    -   **Verifica√ß√£o de E-mail**: Processo de ativa√ß√£o de conta via token enviado por e-mail para garantir a autenticidade do usu√°rio.
    -   **Recupera√ß√£o de Senha**: Funcionalidade de "Esqueci minha senha" que envia um link de redefini√ß√£o por e-mail.
    -   **Autentica√ß√£o JWT**: Uso de JSON Web Tokens (Access e Refresh Tokens) para proteger as rotas da API.
    -   **Controle de Acesso por Papel (Role-Based)**: Distin√ß√£o entre usu√°rios "cliente" e "admin", com rotas espec√≠ficas protegidas para administradores (como a gest√£o de produtos de investimento).

-   **‚ùì Perfil de Investidor (Suitability)**: Question√°rio para determinar o perfil do investidor (Conservador, Moderado, Arrojado).

-   **ü§ñ Carteira Recomendada**: Gera√ß√£o de uma carteira de investimentos sugerida com base no perfil do usu√°rio, utilizando o padr√£o de projeto **Strategy** para cada tipo de perfil.

-   **üíπ Marketplace de Ativos**: Cat√°logo de produtos de investimento com pre√ßos, tipos e n√≠veis de risco variados.

-   **üí∞ Gest√£o de Saldo**: Funcionalidade para **Depositar** valores na conta.

-   **üõí Ciclo de Investimento**:
    -   Fun√ß√£o de **Comprar** ativos com base no **valor monet√°rio** desejado, com o sistema calculando a quantidade de cotas.
    -   Fun√ß√£o de **Vender** uma quantidade espec√≠fica de cotas de um ativo.

-   **üìä Dashboard do Investidor**:
    -   Visualiza√ß√£o da carteira de ativos do usu√°rio ("Minha Carteira").
    -   Gr√°fico de pizza com a distribui√ß√£o percentual dos investimentos.
    -   Saldo atualizado em tempo real.

-   **üöÄ Investimento Autom√°tico**: Bot√£o "Investir com 1 Clique" que aloca todo o saldo do usu√°rio na carteira recomendada.

-   **üìö Documenta√ß√£o Interativa**: API documentada com Swagger (OpenAPI) para f√°cil visualiza√ß√£o e teste dos endpoints.

---

## üõ†Ô∏è Tecnologias Utilizadas

### Backend
-   **Node.js**: Runtime JavaScript (v18+)
-   **Express.js**: Framework para constru√ß√£o da API REST
    -   Middleware para tratamento de requisi√ß√µes
    -   Roteamento
    -   Tratamento de erros
-   **OracleDB (`oracledb`)**: Driver para conex√£o com Oracle Database
    -   Pool de conex√µes
    -   (Transa√ß√µes n√£o explicitamente mostradas, mas poss√≠veis com o driver)
-   **Autentica√ß√£o e Seguran√ßa**:
    -   **JSON Web Token (`jsonwebtoken`)**: Autentica√ß√£o stateless (Access/Refresh Tokens).
    -   **bcryptjs**: Criptografia de senhas.
    -   **express-rate-limit**: Limita√ß√£o de requisi√ß√µes.
    -   **helmet**: Headers de seguran√ßa.
-   **E-mail e Comunica√ß√£o**:
    -   **Nodemailer**: Usado indiretamente via `googleapis` e `MailComposer` para envio de e-mails.
    -   **Google APIs (`googleapis`)**: Autentica√ß√£o OAuth2 para envio de e-mails via Gmail API.
-   **Documenta√ß√£o e Desenvolvimento**:
    -   **Swagger UI Express**: Documenta√ß√£o interativa da API.
    -   **OpenAPI 3.0 (`yamljs`)**: Especifica√ß√£o da API em YAML.
    -   **DotEnv**: Gerenciamento de vari√°veis de ambiente.
-   **Testes**:
    -   **Jest**: Framework de testes.
    -   **Supertest**: Testes de integra√ß√£o HTTP.
    -   Testes de integra√ß√£o para rotas de autentica√ß√£o.
    -   Testes unit√°rios para servi√ßos.

### Frontend
-   **HTML5 / CSS3**
    -   Layout responsivo.
    -   Flexbox e Grid.
    -   Tema claro/escuro.
-   **JavaScript**:
    -   **Vanilla JS (ES6+)**.
    -   **M√≥dulos ES6**.
    -   **Async/Await**.
    -   **LocalStorage / SessionStorage** para persist√™ncia.
    -   **Fetch API** (em vez de Axios) para requisi√ß√µes HTTP.
-   **Bibliotecas**:
    -   **Chart.js**: Visualiza√ß√£o de dados.

### Banco de Dados
-   **Oracle Database**
    -   Constraints e Relacionamentos (vis√≠vel no script SQL).
    -   (Procedures, Triggers, √çndices otimizados - n√£o verific√°veis diretamente nos arquivos fornecidos, mas pr√°ticas comuns).

---

## ‚öôÔ∏è Instala√ß√£o e Configura√ß√£o

Siga os passos abaixo para rodar o projeto localmente.

### Pr√©-requisitos
-   **Node.js** (vers√£o 18 ou superior)
-   Acesso a um **Banco de Dados Oracle**.

### Passos

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone [https://github.com/seu-usuario/assessor-virtual-api.git](https://github.com/seu-usuario/assessor-virtual-api.git)
    cd assessor-virtual-api
    ```

2.  **Instale as depend√™ncias:**
    ```bash
    npm install
    ```
   

3.  **Configure as vari√°veis de ambiente:**
    -   Crie um arquivo chamado `.env` na raiz do projeto.
    -   Copie o conte√∫do do exemplo abaixo e preencha com suas credenciais do Oracle e outras configura√ß√µes. (Nota: O arquivo `.env.example` n√£o est√° no reposit√≥rio, use este bloco como guia).

    **.env (Exemplo)**
    ```env
    # Configura√ß√µes do Servidor
    PORT=3000
    ENVIRONMENT=http://localhost:3000 # ou [https://assessor-virtual-api.onrender.com](https://assessor-virtual-api.onrender.com)

    # Credenciais do Banco de Dados Oracle
    DB_USER=SEU_USUARIO_ORACLE
    DB_PASSWORD=SUA_SENHA_ORACLE
    DB_URL=oracle.fiap.com.br:1521/ORCL

    # Chaves secretas para JWT (DEVEM SER DIFERENTES E SEGURAS)
    SECRET=SUA_CHAVE_SECRETA_PRINCIPAL_SUPER_SEGURA
    REFRESH_SECRET=SUA_CHAVE_SECRETA_REFRESH_SUPER_SEGURA

    # Configura√ß√£o de Expira√ß√£o JWT (em segundos)
    JWT_EXPIRATION=1800 # 30 minutos
    JWT_REFRESH_EXPIRATION=604800 # 7 dias

    # E-mail do projeto (usado para autentica√ß√£o de envio de e-mails via Gmail API)
    EMAIL_USER=SEU_EMAIL_GOOGLE

    # Credenciais do Google Cloud OAuth2 (para envio de e-mails via Gmail API)
    G_CLIENT_ID=SEU_CLIENT_ID_GOOGLE
    G_CLIENT_SECRET=SEU_CLIENT_SECRET_GOOGLE
    G_REDIRECT_URI=[https://developers.google.com/oauthplayground](https://developers.google.com/oauthplayground)
    G_REFRESH_TOKEN=SEU_REFRESH_TOKEN_GOOGLE_OBTIDO_NO_PLAYGROUND

    # Credenciais do Administrador (para login direto via API)
    ADMIN_EMAIL=admin@admin.com
    ADMIN_PASSWORD=admin
    ```
   

4.  **Configure o Banco de Dados:**
    -   Execute o script SQL abaixo no seu banco de dados Oracle para criar todas as tabelas, relacionamentos e inserir os dados iniciais.
    -   *(O script j√° inclui a l√≥gica para apagar as tabelas antigas, se existirem)*.
    ```sql
    -- Bloco para limpar as tabelas do projeto de investimento antes de cri√°-las.
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE investimento_carteira CASCADE CONSTRAINTS';
        EXECUTE IMMEDIATE 'DROP TABLE investimento_cliente CASCADE CONSTRAINTS';
        EXECUTE IMMEDIATE 'DROP TABLE investimento_perfil CASCADE CONSTRAINTS';
        EXECUTE IMMEDIATE 'DROP TABLE investimento_produto CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    /
        
    -- Tabela para armazenar os tipos de perfil de investidor
    CREATE TABLE investimento_perfil (
        id NUMBER(19) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        nome VARCHAR2(100) NOT NULL,
        descricao VARCHAR2(500) NOT NULL,
        CONSTRAINT uq_investimento_perfil_nome UNIQUE (nome)
    );

    -- Tabela de clientes com campos de seguran√ßa de tokens
    CREATE TABLE investimento_cliente (
        id NUMBER(19) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        nome VARCHAR2(255) NOT NULL,
        email VARCHAR2(255) NOT NULL,
        senha VARCHAR2(255) NOT NULL,
        email_verificado NUMBER(1) DEFAULT 0 NOT NULL,
        saldo NUMBER(19, 2) DEFAULT 0.00 NOT NULL,
        perfil_id NUMBER(19),
        email_verification_token VARCHAR2(255),         -- Hash SHA-256 do token de verifica√ß√£o de email
        email_verification_token_expires DATE,          -- Expira√ß√£o do token de verifica√ß√£o (24h)
        reset_password_token VARCHAR2(255),             -- Hash SHA-256 do token de redefini√ß√£o de senha
        reset_password_token_expires DATE,              -- Expira√ß√£o do token de redefini√ß√£o (1h)
        refresh_token VARCHAR2(255),                    -- Hash SHA-256 do refresh token JWT
        refresh_token_expires DATE,                     -- Expira√ß√£o do refresh token (7 dias)
        CONSTRAINT uq_investimento_cliente_email UNIQUE (email),
        CONSTRAINT fk_invest_cliente_perfil FOREIGN KEY (perfil_id)
            REFERENCES investimento_perfil(id)
            ON DELETE SET NULL
    );

    -- Tabela para o cat√°logo de produtos de investimento
    CREATE TABLE investimento_produto (
        id NUMBER(19) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        nome VARCHAR2(255) NOT NULL,
        tipo VARCHAR2(100) NOT NULL,
        risco VARCHAR2(50) NOT NULL,
        preco NUMBER(19, 2) NOT NULL,
        CONSTRAINT chk_investimento_produto_risco CHECK (risco IN ('Baixo', 'M√©dio', 'Alto'))
    );

    -- Tabela para registrar os ativos comprados por cada cliente
    CREATE TABLE investimento_carteira (
        id NUMBER(19) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        cliente_id NUMBER(19) NOT NULL,
        produto_id NUMBER(19) NOT NULL,
        quantidade NUMBER(19, 8) NOT NULL, -- Precis√£o para cotas fracionadas
        CONSTRAINT fk_carteira_cliente FOREIGN KEY (cliente_id) REFERENCES investimento_cliente(id) ON DELETE CASCADE,
        CONSTRAINT fk_carteira_produto FOREIGN KEY (produto_id) REFERENCES investimento_produto(id) ON DELETE CASCADE,
        CONSTRAINT uq_carteira_cliente_produto UNIQUE (cliente_id, produto_id)
    );

    -- Inserir Perfis
    INSERT INTO investimento_perfil (nome, descricao) VALUES ('Conservador', 'Prefere seguran√ßa e baixa volatilidade.');
    INSERT INTO investimento_perfil (nome, descricao) VALUES ('Moderado', 'Busca um equil√≠brio entre seguran√ßa e rentabilidade.');
    INSERT INTO investimento_perfil (nome, descricao) VALUES ('Arrojado', 'Tolera altos riscos em busca de maior rentabilidade.');

    -- Inserir Produtos de Investimento
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Tesouro Selic', 'Renda Fixa', 'Baixo', 108.50);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('CDB PagSeguro', 'Renda Fixa', 'Baixo', 100.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Fundo Imobili√°rio HGLG11', 'FII', 'M√©dio', 162.30);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Fundo de A√ß√µes Tech', 'A√ß√µes', 'Alto', 85.20);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('A√ß√µes da Petrobras', 'A√ß√µes', 'Alto', 34.75);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('CDB Banco Inter', 'Renda Fixa', 'Baixo', 100.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('CDB Nubank', 'Renda Fixa', 'Baixo', 1.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Fundo Imobili√°rio MXRF11', 'FII', 'M√©dio', 10.55);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Fundo Imobili√°rio XPML11', 'FII', 'M√©dio', 115.70);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('ETF BOVA11 (Ibovespa)', 'A√ß√µes', 'Alto', 112.30);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('ETF IVVB11 (S&P 500)', 'A√ß√µes', 'Alto', 255.80);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('BDR Google (GOGL34)', 'BDR', 'Alto', 58.90);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('BDR Apple (AAPL34)', 'BDR', 'Alto', 85.40);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Cripto Bitcoin (BTC)', 'Cripto', 'Alto', 150000.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Cripto Ethereum (ETH)', 'Cripto', 'Alto', 9500.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Tesouro IPCA+', 'Renda Fixa', 'Baixo', 105.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('CDB Bradesco', 'Renda Fixa', 'Baixo', 100.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Fundo Imobili√°rio KNRI11', 'FII', 'M√©dio', 150.20);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Fundo de A√ß√µes Energia', 'A√ß√µes', 'Alto', 78.50);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('A√ß√µes da Vale', 'A√ß√µes', 'Alto', 65.40);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('CDB Santander', 'Renda Fixa', 'Baixo', 100.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('CDB Ita√∫', 'Renda Fixa', 'Baixo', 100.00);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Fundo Imobili√°rio HGBS11', 'FII', 'M√©dio', 130.80);
    INSERT INTO investimento_produto (nome, tipo, risco, preco) VALUES ('Fundo de A√ß√µes Financeiro', 'A√ß√µes', 'Alto', 92.30);

    COMMIT;
    ```

5.  **Execute a migration de seguran√ßa (IMPORTANTE):**
    
    Se voc√™ j√° tinha o banco criado anteriormente, execute esta migration adicional para os novos campos de seguran√ßa:
    
    ```sql
    -- Migration 002: Adicionar campos de expira√ß√£o de tokens
    -- Necess√°rio apenas se voc√™ j√° tinha o banco criado sem estes campos
    
    ALTER TABLE investimento_cliente 
    ADD email_verification_token_expires DATE;
    
    ALTER TABLE investimento_cliente 
    ADD refresh_token_expires DATE;
    
    COMMIT;
    ```

6.  **Instale as depend√™ncias:**
    ```bash
    npm install
    ```

7.  **Inicie o servidor:**
    ```bash
    node app.js
    ```
   

---

## üöÄ Uso

### Endpoints Dispon√≠veis

#### Autentica√ß√£o (Rate Limited)
- `POST /api/auth/register` - Registro de novo usu√°rio (10 req/15min)
- `POST /api/auth/login` - Login de usu√°rio (10 req/15min)
- `POST /api/auth/verify-email` - Verifica e-mail do usu√°rio
- `POST /api/auth/forgot-password` - Solicita redefini√ß√£o de senha (10 req/15min)
- `POST /api/auth/reset-password` - Redefine a senha (10 req/15min)
- `POST /api/auth/refresh-token` - Renova o token JWT (20 req/15min)

#### Clientes (Requer Autentica√ß√£o)
- `GET /api/clientes` - Lista todos os clientes (Apenas Admin)
- `GET /api/clientes/{id}` - Busca cliente por ID (Dono ou Admin)
- `PUT /api/clientes/{id}` - Atualiza dados do cliente (Dono ou Admin)
- `DELETE /api/clientes/{id}` - Remove cliente (Dono ou Admin)
- `POST /api/clientes/{id}/perfil` - Define perfil do investidor (Dono ou Admin)
- `POST /api/clientes/{id}/depositar` - Deposita valor na conta (Dono ou Admin)

#### Carteira (Requer Autentica√ß√£o)
- `GET /api/clientes/{id}/carteira` - Lista ativos da carteira (Dono ou Admin)
- `POST /api/clientes/{id}/carteira/comprar` - Compra ativo por valor (Dono ou Admin)
- `POST /api/clientes/{id}/carteira/vender` - Vende ativo por quantidade (Dono ou Admin)

#### Recomenda√ß√µes (Requer Autentica√ß√£o)
- `GET /api/clientes/{id}/recomendacoes` - Obt√©m recomenda√ß√µes (Dono ou Admin)
- `POST /api/clientes/{id}/recomendacoes/investir` - Investe conforme recomenda√ß√£o (Dono ou Admin)

#### Produtos de Investimento
- `GET /api/investimentos` - Lista todos os produtos (P√∫blico)
- `GET /api/investimentos/{id}` - Busca produto por ID (P√∫blico)
- `POST /api/investimentos` - Cria novo produto (Apenas Admin)
- `PUT /api/investimentos/{id}` - Atualiza produto (Apenas Admin)
- `DELETE /api/investimentos/{id}` - Remove produto (Apenas Admin)

### Acessando a Aplica√ß√£o

-   **Frontend**: `http://localhost:3000` (ou o valor de `ENVIRONMENT`)
    > Interface web completa da plataforma

-   **Swagger UI**: `http://localhost:3000/api-docs` (ou `ENVIRONMENT`/api-docs)
    > Documenta√ß√£o interativa da API

### Exemplos de Uso

1.  **Registro de Usu√°rio**
    ```bash
    curl -X POST http://localhost:3000/api/auth/register \
      -H "Content-Type: application/json" \
      -d '{
        "nome": "Jo√£o Silva",
        "email": "joao@email.com",
        "senha": "SenhaValida123@"
      }'
    ```

2.  **Login**
    ```bash
    curl -X POST http://localhost:3000/api/auth/login \
      -H "Content-Type: application/json" \
      -d '{
        "email": "joao@email.com",
        "senha": "SenhaValida123@"
      }'
    ```

3.  **Compra de Ativo por Valor** (Ajustado para enviar 'valor')
    ```bash
    # Primeiro, obtenha o ${TOKEN} do login
    curl -X POST http://localhost:3000/api/clientes/{id_do_cliente}/carteira/comprar \
      -H "Authorization: Bearer ${TOKEN}" \
      -H "Content-Type: application/json" \
      -d '{
        "produtoId": 1,
        "valor": 500.00
      }'
    ```
    *(Nota: Embora o exemplo use `valor`, a API atualmente espera `quantidade` no corpo. O backend faz a convers√£o internamente.)*


---

## üìÇ Estrutura do Projeto

A estrutura do projeto segue os princ√≠pios de Clean Architecture e SOLID:

```
.
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/                    # Rotas e configura√ß√£o de endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.js      # Rotas de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ carteira.routes.js  # Rotas de carteira
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clientes.routes.js  # Rotas de clientes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ investimentos.routes.js # Rotas de produtos de investimento
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/         # Testes de integra√ß√£o das rotas
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/                # Configura√ß√µes do projeto
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.config.js     # Configura√ß√µes de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.js        # Configura√ß√£o do banco de dados
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ controllers/          # Controladores da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ carteira.controller.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cliente.controller.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ perfil.controller.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ produtoInvestimento.controller.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recomendacao.controller.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ dtos/                # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.dto.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ carteira.dto.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cliente.dto.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ perfil.dto.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ produtoInvestimento.dto.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recomendacao.dto.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/         # Middlewares da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authJwt.js      # Middleware de autentica√ß√£o JWT
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errorHandler.js  # Tratamento global de erros
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/             # Modelos de dom√≠nio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ carteira.model.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cliente.model.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ perfilInvestidor.model.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ produtoInvestimento.model.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ repositories/       # Camada de acesso a dados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ carteira.repository.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cliente.repository.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ produtoInvestimento.repository.js
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ services/          # L√≥gica de neg√≥cio
‚îÇ       ‚îú‚îÄ‚îÄ auth.service.js
‚îÇ       ‚îú‚îÄ‚îÄ carteira.service.js
‚îÇ       ‚îú‚îÄ‚îÄ cliente.service.js
‚îÇ       ‚îú‚îÄ‚îÄ email.service.js
‚îÇ       ‚îú‚îÄ‚îÄ perfil.service.js
‚îÇ       ‚îú‚îÄ‚îÄ produtoInvestimento.service.js
‚îÇ       ‚îú‚îÄ‚îÄ recomendacao.service.js
‚îÇ       ‚îî‚îÄ‚îÄ __tests__/    # Testes unit√°rios
‚îÇ
‚îú‚îÄ‚îÄ static/              # Frontend da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ services/        # Servi√ßos do frontend
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js      # Cliente HTTP
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ state.js    # Gerenciamento de estado
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui.js       # Intera√ß√£o com a interface
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ app.js         # L√≥gica principal do frontend
‚îÇ   ‚îú‚îÄ‚îÄ index.html     # P√°gina principal
‚îÇ   ‚îî‚îÄ‚îÄ style.css      # Estilos CSS
‚îÇ
‚îú‚îÄ‚îÄ .env              # Vari√°veis de ambiente
‚îú‚îÄ‚îÄ .env.example      # Exemplo de vari√°veis de ambiente
‚îú‚îÄ‚îÄ package.json      # Depend√™ncias e scripts
‚îî‚îÄ‚îÄ README.md         # Documenta√ß√£o principal
```

Cada diret√≥rio tem uma responsabilidade espec√≠fica, seguindo o princ√≠pio da Separa√ß√£o de Responsabilidades:
    ‚îú‚îÄ‚îÄ .gitignore              # Arquivos e pastas a serem ignorados pelo Git
    ‚îú‚îÄ‚îÄ app.js                  # Ponto de entrada da aplica√ß√£o (servidor)
    ‚îú‚îÄ‚îÄ package.json            # Depend√™ncias e metadados do projeto
    ‚îî‚îÄ‚îÄ swagger.yaml            # Defini√ß√£o da API no padr√£o OpenAPI 3.0

---

## üß™ Testes

Os testes est√£o organizados em dois n√≠veis:

### Testes de Integra√ß√£o
Localizados em `src/api/__tests__/`:
- `auth.routes.test.js` - Testa fluxos de autentica√ß√£o
- `clientes.routes.test.js` - Testa opera√ß√µes com clientes

### Testes de Servi√ßo
Localizados em `src/services/__tests__/`:
- `auth.service.test.js` - Testa l√≥gica de autentica√ß√£o
- `carteira.service.test.js` - Testa opera√ß√µes de carteira

---

## ‚ÑπÔ∏è Observa√ß√µes

- Certifique-se de preencher corretamente todas as vari√°veis do `.env` conforme o exemplo acima.
- O servi√ßo de e-mail utiliza autentica√ß√£o OAuth2 do Google Cloud (preencha as credenciais do Google).
- O link do reposit√≥rio deve ser entregue garantindo acesso ao professor.
- M√©todos e classes seguem boas pr√°ticas de organiza√ß√£o e legibilidade.
